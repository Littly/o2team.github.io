<!DOCTYPE html><html lang="zh-cn" class="theme-o2 page-post-detail"><head prefix="og: http://ogp.me/ns#"><meta charset="utf-8"><title>精致化页面重构 | Aotu.io</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="keywords" name="summary,凹凸实验室,Aotu,前端开发,全栈开发,IOS开发,Android开发"><link rel="canonical" href="http://aotu.io/notes/2015/11/24/project-summary/index.html"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/apple-touch-icon-152x152.png"><link rel="icon" type="image/png" href="/assets/img/favicon-230x230.png" sizes="230x230"><link rel="icon" type="image/png" href="/assets/img/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/assets/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/assets/img/favicon-32x32.png" sizes="32x32"><meta name="msapplication-TileColor" content="#2f83cd"><meta name="msapplication-TileImage" content="/assets/img/mstile-144x144.png"><link rel="stylesheet" href="/assets/css/dist-ac6e94351c.o2.css"><link rel="stylesheet" href="/assets/fancybox/jquery.fancybox.css"><link rel="alternative" href="/atom.xml" title="Aotu.io" type="application/atom+xml"><meta name="description" content="一 布局方式作为一个注重用户体验的 H5 页面，合适的页面布局方式很重要。移动端页面常规布局基本分两种：
1. 流式布局（响应式宽度自适应布局）这是普遍使用的方法，流式布局使用这个标签即可自适应所有尺寸的屏幕。1&amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0, minimum-scale=1.0, max"><meta property="og:type" content="article"><meta property="og:title" content="精致化页面重构"><meta property="og:url" content="http://aotu.io/notes/2015/11/24/project-summary/index.html"><meta property="og:site_name" content="Aotu.io"><meta property="og:description" content="一 布局方式作为一个注重用户体验的 H5 页面，合适的页面布局方式很重要。移动端页面常规布局基本分两种：
1. 流式布局（响应式宽度自适应布局）这是普遍使用的方法，流式布局使用这个标签即可自适应所有尺寸的屏幕。1&amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0, minimum-scale=1.0, max"><meta property="og:image" content="http://aotu.io/img/post/liqinuo/1.png"><meta property="og:image" content="http://aotu.io/img/post/liqinuo/2.png"><meta property="og:image" content="http://aotu.io/img/post/liqinuo/3.png"><meta property="og:image" content="http://aotu.io/img/post/liqinuo/4.png"><meta property="og:updated_time" content="2015-12-10T02:02:53.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="精致化页面重构"><meta name="twitter:description" content="一 布局方式作为一个注重用户体验的 H5 页面，合适的页面布局方式很重要。移动端页面常规布局基本分两种：
1. 流式布局（响应式宽度自适应布局）这是普遍使用的方法，流式布局使用这个标签即可自适应所有尺寸的屏幕。1&amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0, minimum-scale=1.0, max"><meta name="twitter:site" content="o2circle"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e850b980d029480b092fdd7503c3f8de";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script><script>!function(){var e=document.createElement("script");e.src="//push.zhanzhang.baidu.com/push.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script><script>var App={root:"/"};</script><body itemscope itemtype="http://schema.org/WebPage"><div class="navbar navbar-fixed-top header" itemscope itemtype="http://schema.org/WPHeader"><div class="container"><div class="navbar-header"><a href="/index.html" title="Aotu.io" class="navbar-brand"><img src="/assets/img/logo_186x65.png" alt="Aotu.io"></a><div class="navbar-toggle" data-toggle="collapse" data-target="#navbar-main"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></div></div><div class="navbar-collapse collapse" id="navbar-main"><ul class="nav navbar-nav header-links header-links-main"><li class="main-nav-item"><a href="/index.html" class="main-nav-link">首页</a></li><li class="main-nav-item active"><a href="/notes/" class="main-nav-link">博客</a></li><li class="main-nav-item"><a href="/tags/" class="main-nav-link">标签</a></li><li class="main-nav-item"><a href="/about/" class="main-nav-link">关于</a></li></ul><ul class="nav navbar-nav navbar-right header-links header-links-extra"><li class="search-wrap"><a class="fa fa-search search-icon" href="#search" title="搜索"></a><form id="search" method="get" class="search-form"><input type="text" name="query" class="search-form-ipt" placeholder="搜索"></form></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" id="themes" aria-expanded="false">主题&nbsp;<span class="caret"></span></a><ul id="theme-list" class="dropdown-menu" aria-labelledby="themes"><li data-v="light"><a href="javascript:;">曙光女神</a></li><li data-v="dark"><a href="javascript:;">暗影猎手</a></li></ul></li></ul></div></div></div><div class="container post-wrap"><article class="post" itemscope itemtype="http://schema.org/Article"><header class="post-header"><div class="post-title"><h2><a href="/notes/2015/11/24/project-summary/" itemprop="name">精致化页面重构</a></h2><ul class="post-stats"><li><a href="/tags/summary/" class="meta-tag">summary</a></li><li title="字数"><span class="icon fa-font">5,816</span></li><li id="busuanzi_container_page_pv" title="热度"><span class="icon fa-eye" id="busuanzi_value_page_pv"></span></li><li><a href="/notes/2015/11/24/project-summary/#comments" itemprop="discussionUrl" class="lnk-comments"><span class="post-comments-count ds-thread-count icon fa-comments" data-thread-key="bm90ZXMvMjAxNS8xMS8yNC9wcm9qZWN0LXN1bW1hcnkv" data-count-type="comments" itemprop="commentsCount">0</span></a></li></ul><p>刚完成了一个项目的开发，本文将分享给大家一些项目中的一些经验与小技巧。</p></div><div class="post-meta"><time class="published" datetime="2015-11-23T20:23:44.000Z" itempro="datePublished">星期一, 11月23日 2015</time> <a target="_blank" href="https://github.com/liqinuo" class="author"><span class="name">NoNo</span><img src="https://avatars.githubusercontent.com/liqinuo?v=3&s=80" alt="liqinuo"></a></div></header><a href="/notes/2015/11/24/project-summary/" class="image featured post-cover"><img src="/assets/img/post/liqinuo/cover.png" alt="精致化页面重构"></a><div class="post-content" itemprop="articleBody" data-swiftype-index="true"><a id="more"></a><h2 id="一_布局方式" class="post-heading">一 布局方式<a class="post-anchor" href="#一_布局方式" aria-hidden="true"></a></h2><p>作为一个注重用户体验的 H5 页面，合适的页面布局方式很重要。<br>移动端页面常规布局基本分两种：</p><h3 id="1-_流式布局（响应式宽度自适应布局）" class="post-heading">1. 流式布局（响应式宽度自适应布局）<a class="post-anchor" href="#1-_流式布局（响应式宽度自适应布局）" aria-hidden="true"></a></h3><p>这是普遍使用的方法，流式布局使用这个标签即可自适应所有尺寸的屏幕。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br></pre></table></figure></p><p>优点：响应式、简单、兼容好。<br>缺点：非设计稿尺寸屏幕展现效果可能不是很理想。</p><h3 id="2-_版式布局（页面等比缩放布局）" class="post-heading">2. 版式布局（页面等比缩放布局）<a class="post-anchor" href="#2-_版式布局（页面等比缩放布局）" aria-hidden="true"></a></h3><p><strong>可行方案：</strong></p><ol><li>页面使用 REM 作为页面数值单位运算。</li><li>通过 zoom/scale 整体缩放页面。</li></ol><p>优点：页面等比缩放，比例与设计稿一致。<br>缺点：大屏手机等比放大后的体验可能不佳。</p><h3 id="结论：" class="post-heading">结论：<a class="post-anchor" href="#结论：" aria-hidden="true"></a></h3><p>两种布局方式各有优劣，项目最终选用流式布局，原因：</p><ol><li>部分页面还是与现有项目模块共用，版式布局改动成本偏高，不好维护。</li><li>考虑到页面在大屏手机等比放大后的体验可能不佳。</li><li>流式布局可以针对大屏手机做一些更灵活的排版（配合媒体查询），达到更好的用户体验。</li></ol><h2 id="二_设计规范" class="post-heading">二 设计规范<a class="post-anchor" href="#二_设计规范" aria-hidden="true"></a></h2><p>设计规范也是重要元素之一，条件允许情况下，从开发前期就需要跟设计师达成共识制定了一套设计规范。</p><p><strong>设计规范需要包括：</strong><br>页面背景色、文字颜色、边框颜色、各种按钮样式、图标等等全局通用样式。</p><p class="user_img"><img src="/assets/img/post/liqinuo/1.png"></p><p>当然除了前期到设计规范，开发过程中这边也需要分离出一些可复用的组件、公共样式，包括：<br>公共底部、商品组模块、轮播组件等等。</p><h2 id="三_技巧" class="post-heading">三 技巧<a class="post-anchor" href="#三_技巧" aria-hidden="true"></a></h2><h3 id="1-_还原设计稿的_0-5px" class="post-heading">1. 还原设计稿的 0.5px<a class="post-anchor" href="#1-_还原设计稿的_0-5px" aria-hidden="true"></a></h3><blockquote><p>在 2014 年的 WWDC，“设计响应的 Web 体验” 一讲中，Ted O’Connor 讲到关于“retina hairlines”（retina 极细的线）：在 retina 屏上仅仅显示 1 物理像素的边框。</p></blockquote><p>简单点说就是：在 Retina 屏的设备上，1px 其实相当于 2 个物理像素，所以 1 个物理像素 = 0.5px。</p><p class="user_img"><img src="/assets/img/post/liqinuo/2.png"></p><p>实现 0.5px 有很多种方法，这里比较一下各种处理的优缺点：</p><h4 id="1-_iOS8_以上支持_0-5px" class="post-heading">1. iOS8 以上支持 0.5px<a class="post-anchor" href="#1-_iOS8_以上支持_0-5px" aria-hidden="true"></a></h4><p>实现原理：常规属性。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre><td class="code"><pre><span class="line"><span class="class">.border</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">0.5px</span> solid red</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure><p>优点：原生、简单、常规写法。<br>缺点：目前只有 iOS8 以上系统才能支持，iOS7及以下、安卓系统都显示为 0px，可以通过脚本判断系统然后区分处理。</p><h4 id="2-_CSS_渐变模拟" class="post-heading">2. CSS 渐变模拟<a class="post-anchor" href="#2-_CSS_渐变模拟" aria-hidden="true"></a></h4><p>实现原理：设置 1px 通过 css 实现的背景图片，50%有颜色，50%透明。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre><td class="code"><pre><span class="line"><span class="class">.border</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">background-image</span>:<span class="value"><span class="function">linear-gradient</span>(<span class="number">180deg</span>, red, red <span class="number">50%</span>, transparent <span class="number">50%</span>), <span class="function">linear-gradient</span>(<span class="number">270deg</span>, red, red <span class="number">50%</span>, transparent <span class="number">50%</span>), <span class="function">linear-gradient</span>(<span class="number">0deg</span>, red, red <span class="number">50%</span>, transparent <span class="number">50%</span>), <span class="function">linear-gradient</span>(<span class="number">90deg</span>, red, red <span class="number">50%</span>, transparent <span class="number">50%</span>)</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background-size</span>:<span class="value"> <span class="number">100%</span> <span class="number">1px</span>, <span class="number">1px</span> <span class="number">100%</span>, <span class="number">100%</span> <span class="number">1px</span>, <span class="number">1px</span> <span class="number">100%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background-repeat</span>:<span class="value"> no-repeat</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background-position</span>:<span class="value"> top, right top, bottom, left top</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure></p><p>优点：兼容性较好，单边框、多边框可实现，大小、颜色可配置。<br>缺点：代码量多、无法实现圆角、同时占用了背景样式</p><h4 id="3-_阴影" class="post-heading">3. 阴影<a class="post-anchor" href="#3-_阴影" aria-hidden="true"></a></h4><p>实现原理：利用 css 对阴影处理的方式模拟。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre><td class="code"><pre><span class="line"><span class="class">.border</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">-webkit-box-shadow</span>:<span class="value"> <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> -<span class="number">1px</span> <span class="function">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure></p><p>优点：兼容性较好，单边框、多边框、圆角可实现，大小、颜色、可配置。<br>缺点：模拟效果强差人意，颜色不好配置。</p><h4 id="4-_viewport_+_rem" class="post-heading">4. viewport + rem<a class="post-anchor" href="#4-_viewport_+_rem" aria-hidden="true"></a></h4><p>实现原理：通过设置页面 viewport 与对应 rem 基准值。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre><td class="code"><pre><span class="line"><span class="comment">&lt;!-- devicePixelRatio = 2：--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- devicePixelRatio = 3：--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"initial-scale=0.3333333333333333, maximum-scale=0.3333333333333333, minimum-scale=0.3333333333333333, user-scalable=no"</span>&gt;</span></span><br></pre></table></figure><p>优点：兼容比较好，写法跟常规写法无异。<br>缺点：老项目改用 rem 单位成本较高。</p><h4 id="5-_border-image" class="post-heading">5. border-image<a class="post-anchor" href="#5-_border-image" aria-hidden="true"></a></h4><p>实现原理：通过图片配合边框背景模拟。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre><td class="code"><pre><span class="line"><span class="class">.border-image</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">border-image</span>:<span class="value"> <span class="function">url</span>() <span class="number">2</span> <span class="number">0</span> stretch</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border-width</span>:<span class="value"> <span class="number">0</span> <span class="number">0</span> <span class="number">1px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure></p><p>优点：无。<br>缺点：图片边缘模糊，大小、颜色更改不灵活。</p><h4 id="6-_CSS3_缩放" class="post-heading">6. CSS3 缩放<a class="post-anchor" href="#6-_CSS3_缩放" aria-hidden="true"></a></h4><p>实现原理：利用 :before/:after 重做 border，配合 scale 使得伪元素缩小一半<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre><td class="code"><pre><span class="line"><span class="variable">$bor_style</span> <span class="value">: <span class="number">1px</span> solid <span class="hexcolor">#ddd</span>;</span></span><br><span class="line">%<span class="attribute">border-top</span>-1pt &#123;</span><br><span class="line">    <span class="attribute">content</span><span class="value">: <span class="string">''</span>;</span></span><br><span class="line">    <span class="attribute">height</span><span class="value">: <span class="number">0</span>;</span></span><br><span class="line">    <span class="attribute">display</span><span class="value">: block;</span></span><br><span class="line">    <span class="attribute">border-bottom</span><span class="value">: <span class="variable">$bor_style</span>;</span></span><br><span class="line">    <span class="attribute">position</span><span class="value">: absolute;</span></span><br><span class="line">    <span class="attribute">left</span><span class="value">: <span class="number">0</span>;</span></span><br><span class="line">    <span class="attribute">right</span><span class="value">: <span class="number">0</span>;</span></span><br><span class="line">    <span class="attribute">top</span><span class="value">: <span class="number">0</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="at_rule">@<span class="keyword">media</span><span class="preprocessor"> only</span><span class="preprocessor"> screen</span><span class="preprocessor"> and</span> (-webkit-min-device-pixel-ratio:<span class="number">2</span>) &#123;</span></span><br><span class="line">    %<span class="attribute">border-top</span>-1pt &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span><span class="value">: <span class="function">scaleY</span>(<span class="number">0.5</span>);</span></span><br><span class="line">        -webkit-<span class="attribute">transform-origin</span><span class="value">: <span class="number">50%</span> <span class="number">0%</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></table></figure></p><p>优点：实现简单、单边框、多边框、圆角可实现，大小、颜色可配置。<br>缺点：代码量多，可通过 sass 预处理器处理。</p><h4 id="总结：" class="post-heading">总结：<a class="post-anchor" href="#总结：" aria-hidden="true"></a></h4><p>经过比较与实操测试，最好的处理方式是 CSS3 缩放，目前项目已经在广泛使用。</p><h3 id="2-_Flexbox_布局" class="post-heading">2. Flexbox 布局<a class="post-anchor" href="#2-_Flexbox_布局" aria-hidden="true"></a></h3><blockquote><p>Flexbox Layout（弹性盒模型）模块（目前W3C工作草案正在最后通过）的目的是为了提供一种更有效的方式来布局，使各模块即使大小是未知或者动态的也可以在项目空间中合理分配位置（就像“弹性”这个词一样）。</p></blockquote><p>项目哪些地方可以使用 flexbox？比如这些</p><p class="user_img"><img src="/assets/img/post/liqinuo/3.png"></p><h4 id="基本语法：" class="post-heading">基本语法：<a class="post-anchor" href="#基本语法：" aria-hidden="true"></a></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre><td class="code"><pre><span class="line"><span class="tag">ul</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> box</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> -webkit-box</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> -webkit-flex</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="tag">ul</span> <span class="tag">li</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">flex</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">-webkit-flex</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">box-flex</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">-webkit-box-flex</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure><h3 id="3-_元素水平垂直居中" class="post-heading">3. 元素水平垂直居中<a class="post-anchor" href="#3-_元素水平垂直居中" aria-hidden="true"></a></h3><p>实现的方法有很多种，下面几种比较常用：</p><h4 id="1-_表格方法：" class="post-heading">1. 表格方法：<a class="post-anchor" href="#1-_表格方法：" aria-hidden="true"></a></h4><p>实现方法：表格内容本来就是垂直居中的，可以通过模拟表格处理。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"box_center"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></table></figure></p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre><td class="code"><pre><span class="line"><span class="class">.box_center</span> &#123;</span><br><span class="line">    <span class="attribute">display</span><span class="value">: table-cell;</span></span><br><span class="line">    <span class="attribute">width</span><span class="value">: <span class="number">300px</span>;</span></span><br><span class="line">    <span class="attribute">height</span><span class="value">: <span class="number">300px</span>;</span></span><br><span class="line">    <span class="attribute">text-align</span><span class="value">: center;</span></span><br><span class="line">    <span class="attribute">vertical-align</span><span class="value">: middle;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class">.box_center</span> <span class="class">.inner</span> &#123;</span><br><span class="line">    <span class="attribute">display</span><span class="value">: inline-block;</span></span><br><span class="line">&#125;</span><br></pre></table></figure><h4 id="2-_vertical-align:_middle" class="post-heading">2. vertical-align: middle<a class="post-anchor" href="#2-_vertical-align:_middle" aria-hidden="true"></a></h4><p>实现方法：利用空元素占位实现<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"box_center"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"placeholder"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre><td class="code"><pre><span class="line"><span class="class">.box_center</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">text-align</span>:<span class="value"> center</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.box_center</span> <span class="class">.inner</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> inline-block</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.box_center</span> <span class="class">.placeholder</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> inline-block</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">vertical-align</span>:<span class="value"> middle</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure><h4 id="3-_绝对定位" class="post-heading">3. 绝对定位<a class="post-anchor" href="#3-_绝对定位" aria-hidden="true"></a></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre><td class="code"><pre><span class="line">%<span class="tag">box_center</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> auto</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure><h4 id="4-_使用_transform_实现" class="post-heading">4. 使用 transform 实现<a class="post-anchor" href="#4-_使用_transform_实现" aria-hidden="true"></a></h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre><td class="code"><pre><span class="line">%<span class="tag">box_center</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">-webkit-transform</span>:<span class="value"> <span class="function">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>)</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>)</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure><p>兼容性：Android2.3 系统浏览器不支持容器直接使用 fixed 进行定位，外加 fixed 容器可解决。</p><h4 id="结论：-1" class="post-heading">结论：<a class="post-anchor" href="#结论：-1" aria-hidden="true"></a></h4><p>经过各种场景的适用型比较，项目使用 transform 实现，兼容性好且使用方便。</p><h3 id="4-_图片占位" class="post-heading">4. 图片占位<a class="post-anchor" href="#4-_图片占位" aria-hidden="true"></a></h3><p>图片未加载出来之前浏览器是无法计算出图片实际尺寸的，所以会出现一个问题，页面刚打开各种元素会因为图片未完全加载而跳动/错位。</p><p>这里推荐一种兼容性很好做法简单的方法：</p><p><strong>实现原理：</strong><br>通过图片宽高比例计算出图片所需占位空间，赋值于外容器，图片再绝对定位在等比缩放的容器当中。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre><td class="code"><pre><span class="line"><span class="class">.placeholder</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span>:</span><br><span class="line">    height: <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-top</span>:<span class="value"> <span class="number">100%</span>:</span><br><span class="line"></span></span></span>&#125;</span><br><span class="line"><span class="class">.placeholder</span> <span class="tag">img</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> auto</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></table></figure></p><p><strong>计算公式：</strong><br>padding-top = 图片高度(px)/图片宽度(px) * 100%</p><p><strong>比如：</strong><br>1:1 比例的图片 padding-top: 100%;<br>2:1 比例的图片 padding-top: 50%;</p><h2 id="四_尽可能减少样式图片" class="post-heading">四 尽可能减少样式图片<a class="post-anchor" href="#四_尽可能减少样式图片" aria-hidden="true"></a></h2><p>大多图标元素都可以使用 CSS 样式绘制，可以大大减少样式图资源请求还有增强图标可维护性。<br>比如：链接箭头、圆点、优惠券点点、选择框、checkbox等等。</p><p class="user_img"><img src="/assets/img/post/liqinuo/4.png"></p><h2 id="五_使用_WebP_格式图片" class="post-heading">五 使用 WebP 格式图片<a class="post-anchor" href="#五_使用_WebP_格式图片" aria-hidden="true"></a></h2><blockquote><p>WebP 格式，由 google 于 2010 年推出的新一代图片格式，在压缩方面比 JPEG 格式更优越，并能节省大量的服务器带宽资源和数据空间。与 JPEG 相同，WebP 也是一种有损压缩，主要优势在于高效率。在质量相同的情况下，WebP 格式图像的体积要比 JPEG 格式图像小 40%。</p></blockquote><p>项目中大部分页面素材图都使用了 WebP 格式，兼容方案：</p><ol><li><p><strong>打开场景是浏览器：</strong>通过 javascript 检测，对支持 WebP 的用户输出 WebP 格式图片。<br>WebP 支持 插件：<a href="http://webpjs.appspot.com/" target="_blank" rel="external">http://webpjs.appspot.com/</a></p></li><li><p><strong>打开场景是APP：</strong>根据不同系统使用 Android WebP 解析库或iOS WebP 解析库做兼容解析。<br>Android4.0 以下解析库：<a href="https://github.com/alexey-pelykh/webp-android-backport" target="_blank" rel="external">https://github.com/alexey-pelykh/webp-android-backport</a><br>iOS 解析库：<a href="https://github.com/carsonmcdonald/WebP-iOS-example" target="_blank" rel="external">https://github.com/carsonmcdonald/WebP-iOS-example</a></p></li></ol><p>PS：除了 Android4.0 以上提供原生支持</p><p>资料参考：<a href="http://isux.tencent.com/introduction-of-webp.html" target="_blank" rel="external">http://isux.tencent.com/introduction-of-webp.html</a></p><p><strong>结论：</strong><br>保证图片高清质量的同时，大大压缩了图片大小，节省了服务器带宽资源和数据空间。</p><h2 id="六_APP缓存策略" class="post-heading">六 APP缓存策略<a class="post-anchor" href="#六_APP缓存策略" aria-hidden="true"></a></h2><p>注： APP缓存策略由开发同学提供</p><h3 id="1-_缓存方式" class="post-heading">1. 缓存方式<a class="post-anchor" href="#1-_缓存方式" aria-hidden="true"></a></h3><ul><li><p>模块化的使用 APP 缓存，写入磁盘，包括 HTML、JS、CSS。</p></li><li><p>图片使用浏览器缓存，稳定后的背景图以及常用图片也使用 APP 缓存。</p></li></ul><h3 id="2-_缓存更新" class="post-heading">2. 缓存更新<a class="post-anchor" href="#2-_缓存更新" aria-hidden="true"></a></h3><ul><li><p><strong>主模块更新：</strong>APP 打开就发送主模块版本号到服务端，返回有更新的模块内容以及版本号，并且返回所有模块版本索引。</p></li><li><p><strong>子模块更新：</strong>进去一个主模块，在加载完成后，会检查所有子模块版本索引，并获取需要更新的模块内容。</p></li><li><p><strong>当前模块更新：</strong>在直接打开模块时（非首页进入），会去 check/更新一下当前版本，然后在加载。</p></li></ul></div><div class="post-revision"><i class="fa fa-clock-o"></i> <time class="post-updated" datetime="2015-12-10T02:02:53.000Z" itemprop="dateModified">上次更新：星期四, 12月10日 2015 02:02:53</time></div><div class="actions pagination pagination-post"><div class="pagination-post-prev"><a href="/notes/2015/11/24/3D-CleaningCream/" class="button big" title="使用ThreeJS在浏览器中展示3D物件"><i class="fa fa-chevron-left"></i> 使用ThreeJS在浏览器中展示3D物件</a></div><div class="pagination-post-next"><a href="/notes/2015/11/23/css3-animation-to-movie-part_2/" class="button big" title="以电影之眼看CSS3动画（二）">以电影之眼看CSS3动画（二） <i class="fa fa-chevron-right"></i></a></div></div><div class="post-comments" id="comments"><div class="ds-thread" data-thread-key="bm90ZXMvMjAxNS8xMS8yNC9wcm9qZWN0LXN1bW1hcnkv" data-title="精致化页面重构" data-url="http://aotu.io/notes/2015/11/24/project-summary/index.html"></div><script>var duoshuoQuery={short_name:"aotu"};!function(){var t=document.createElement("script");t.id="duoshuo-script",t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script></div></article><div class="sec sec-footer"><div class="container"><footer id="footer" class="sec-heading footer"><ul class="icons"><li><a href="https://twitter.com/o2circle" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="/atom.xml" class="footer-link fa-rss"><span class="label">RSS</span></a></li><li><a href="https://github.com/o2team/o2team.github.io" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a></li></ul><div class="footer-sec copyright">&copy; 2015 <a href="http://aotu.io" target="_blank">凹凸实验室</a><br>Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.</div><div class="footer-sec words">" Well begun is half done. "</div><div class="footer-sec site-stats" style="display:none"><span id="busuanzi_container_site_pv" class="site-pv">总访问量: <span id="busuanzi_value_site_pv" class="site-pv-num"></span> 次</span> <span id="busuanzi_container_site_uv" class="site-uv">总访客数: <span id="busuanzi_value_site_uv" class="site-uv-num"></span> 人</span></div></footer></div></div></div><section id="smSearch" class="slide-search"><section><form class="search" method="get"><input type="text" name="query" placeholder="搜索"></form></section><section><h3>搜索结果</h3><ul class="links" id="searchResults">Loading...</ul></section></section><script id="tplSearch" type="text/hogan-tpl">{{#items}}
    <li>
        <a href="{{ url }}" target="_blank">
            <h3>{{ title }}</h3>
            {{#desc}}
			<p>{{ desc }}</p>
			{{/desc}}
        </a>
    </li>
    {{/items}}</script><div class="back-to-top" id="backTop"><i class="fa fa-long-arrow-up"></i></div><script src="/assets/js/dist-0a5a3acd5d.o2.js"></script><script src="/assets/js/dist-920de38659.duoshuo.js"></script><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>